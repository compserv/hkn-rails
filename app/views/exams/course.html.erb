<h1><%= @course.course_name %></h1>

<div id="table">
  <table id="exams" class="table">
    <tr>
      <th>Semester</th>
      <th>Instructor</th>
      <th>Midterm 1</th>
      <th>Midterm 2</th>
      <th>Midterm 3</th>
      <th>Final</th>
    </tr>
  <%- @results.each do |semester, instructor, exams, solutions| -%>
    <tr>
      <td>
	<%= semester %>
      </td>
      <td>
	<%= link_to instructor.full_name, surveys_instructor_path(instructor) unless instructor.nil?%>
      </td>
      <%- ['mt1', 'mt2', 'mt3', 'f'].each do |short_type| -%>
	<td>
	<%- exam = exams[short_type] -%> 
	<%- sol = solutions[short_type] -%> 
	<%= (link_to "[#{exam.file_type}]", @exam_path+exam.filename) unless exam.nil?%><%= (link_to '[solution]', @exam_path+sol.filename) unless sol.nil? %>
	<% if @auth["studrel"] %>
	<%= (link_to '[Remove exam]', exams_destroy_path(exam.id) , :method => :delete, :confirm => 'Are you sure?') unless exam.nil?%>
	<%= (link_to '[Update exam]', exams_update_form_path(exam.id), :method => :get) unless exam.nil?%>
	<%= (link_to '[Remove solution]' , exams_destroy_path(sol.id) , :method => :delete, :confirm => 'Are you sure?') unless sol.nil?%>
	<%= (link_to '[Update solution]' , exams_update_form_path(sol.id) , :method => :get) unless sol.nil?%>
	<% end %>
      </td>
      <%- end -%>
    </tr>
  <%- end -%>
  </table>
</div>

<%= render :partial => 'disclaimer' %>
